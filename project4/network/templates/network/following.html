{% extends "network/layout.html" %}
{% load static %}
{% block body %}
{% for post in  page.object_list %}


<ul>
<div class="post">{{post.description}}

    <p style= "color:grey; font-size:12px;"> <strong><a href="{% url 'profile' post.owner_id %}" > {{post.owner}} </strong></a> wrote on: {{post.created_date}} </p>

        {% if post.likes.all.count != 0 %}
    <p id="likes" style= "color:grey; font-size:12px;mix-blend-mode: multiply;"><img src="{% static  'network/images/like1.jpg' %}" alt="like image">
        <span><strong id="likescounter_{{post.id}}">{{ post.likes.all.count }}</strong></span>

        {% else %}
    <p id="likes" style= "color:grey; font-size:12px;mix-blend-mode: multiply;"><img src="{% static  'network/images/like1.jpg' %}" alt="like image">
        <span><strong id="likescounter_{{post.id}}">0</strong></span>
        {% endif %}
{% if user.is_authenticated %}
        <form action="{% url 'following' %}" method="post">
        {% csrf_token %}


        <div class="form-group">
            <input class="form-control" autofocus style="margin-top:30px" type="text" name="reply_txt" placeholder="reply">
            <input type="hidden"  name="post_id" value={{post.pk}}>

        </div>
    <input class="btn btn-primary" type="submit" name="post_reply" value="Post Reply">

    {% ifequal  user post.owner %}


 <form action="{% url 'load_post' post.pk %}" method="post">
     {% csrf_token %}
     <input class="btn btn-primary" name="load_post" type="submit" value="Edit post" >
     <input type="hidden"  name="post_to_load_id" value={{post.pk}}>
 </form>



   {% endifequal %}

                <div class="likes">
                        {% if request.user in post.likes.all %}

                        <span id="unlikebtn" class="likeunlike" data-id="{{post.id}}" onclick="return false" title="UNLIKE" >Unlike</span>
                        {% else %}
                        <span id="likebtn" class="likeunlike" data-id="{{post.id}}" onclick="return false"  title="LIKE">Like</span>
                        {% endif %}

                </div>
{% endif %}



</div>

</ul>






{% for rep in post.replies.all %}
 <ul>



        <div class="replies" ><p style= "color:blue; font-size:10px;"><a href="{% url "profile" rep.owner_id %}">{{rep.owner}}</a>
            replied on {{rep.created_date}}</p> <strong>{{rep}} </strong> </div>
</ul>
{% endfor %}
</form>
    </div>



{% endfor %}
<h2 class="page"> Page: {{ page.number }}</h2>
        <div class="page-links">

            {% if page.has_previous %}
            <a href="{% url 'following' %}?page={{page.previous_page_number }}">Previous</a>

            {% endif %}
            {% if page.has_next %}
            <a href="{% url 'following' %}?page={{page.next_page_number }}">Next</a>
            {% endif %}

        </div>



{% block script %}
    <script src="{% static 'network/likes.js' %}"></script>

{% endblock script %}
{% endblock %}